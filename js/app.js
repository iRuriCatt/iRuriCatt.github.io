var CONFIG={version:"0.2.5",hostname:"https://iruricatt.github.io",root:"/",statics:"/",favicon:{normal:"images/favicon.ico",hidden:"images/failure.ico"},darkmode:!0,auto_scroll:!0,js:{valine:"gh/amehime/MiniValine@4.2.2-beta10/dist/MiniValine.min.js",chart:"npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js",copy_tex:"npm/katex@0.12.0/dist/contrib/copy-tex.min.js",fancybox:"combine/npm/jquery@3.5.1/dist/jquery.min.js,npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js,npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"},css:{valine:"css/comment.css",katex:"npm/katex@0.12.0/dist/katex.min.css",mermaid:"css/mermaid.css",fancybox:"combine/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"},loader:{start:!0,switch:!1},search:null,valine:{appId:null,appKey:null,placeholder:"\u30FD(\u25CB\xB4\u2200`)\uFF89\u266A",avatar:"mp",pageSize:10,lang:"en",visitor:!0,NoRecordIP:!1,serverURLs:null,powerMode:!0,tagMeta:{visitor:"\u65B0\u670B\u53CB",master:"\u4E3B\u4EBA",friend:"\u5C0F\u4F19\u4F34",investor:"\u91D1\u4E3B\u7C91\u7C91"},tagColor:{master:"var(--color-orange)",friend:"var(--color-aqua)",investor:"var(--color-pink)"},tagMember:{master:null,friend:null,investor:null}},quicklink:{timeout:3e3,priority:!0},audio:[{title:"\u5217\u88681",list:["https://music.163.com/#/song?id=2097444843","https://music.163.com/#/song?id=1951069525","https://music.163.com/#/song?id=2615583669","https://music.163.com/#/song?id=2023212774"]},{title:"\u5217\u88682",list:["https://music.163.com/#/song?id=26387325","https://music.163.com/#/song?id=1851652156","https://music.163.com/#/song?id=1871871951"]}]};const getRndInteger=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getDocHeight=function(){return $("main > .inner").offsetHeight},getScript=function(e,t,i){if(i)t();else{var a=document.createElement("script");a.onload=a.onreadystatechange=function(r,c){(c||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a=void 0,!c&&t&&setTimeout(t,0))},a.src=e,document.head.appendChild(a)}},assetUrl=function(e,t){var i=CONFIG[e][t];return i.indexOf("npm")>-1||i.indexOf("gh")>-1||i.indexOf("combine")>-1?"//cdn.jsdelivr.net/"+i:i.indexOf("http")>-1?i:statics+i},vendorJs=function(e,t,i){LOCAL[e]&&getScript(assetUrl("js",e),t||function(){window[e]=!0},i||window[e])},vendorCss=function(e,t){window["css"+e]||LOCAL[e]&&(document.head.createChild("link",{rel:"stylesheet",href:assetUrl("css",e)}),window["css"+e]=!0)},pjaxScript=function(e){var t=e.text||e.textContent||e.innerHTML||"",i=e.parentNode;i.removeChild(e);var a=document.createElement("script");e.id&&(a.id=e.id),e.className&&(a.className=e.className),e.type&&(a.type=e.type),e.src&&(a.src=e.src,a.async=!1),e.dataset.pjax!==void 0&&(a.dataset.pjax=""),t!==""&&a.appendChild(document.createTextNode(t)),i.appendChild(a)},pageScroll=function(e,t,i){var a={targets:typeof t=="number"?e.parentNode:document.scrollingElement,duration:500,easing:"easeInOutQuad",scrollTop:t||(typeof e=="number"?e:e?e.top()+document.documentElement.scrollTop-siteNavHeight:0),complete:function(){i&&i()}};anime(a)},transition=function(e,t,i){var a={},r="none";switch(t){case 0:a={opacity:[1,0]};break;case 1:a={opacity:[0,1]},r="block";break;case"bounceUpIn":a={begin:function(c){e.display("block")},translateY:[{value:-60,duration:200},{value:10,duration:200},{value:-5,duration:200},{value:0,duration:200}],opacity:[0,1]},r="block";break;case"shrinkIn":a={begin:function(c){e.display("block")},scale:[{value:1.1,duration:300},{value:1,duration:200}],opacity:1},r="block";break;case"slideRightIn":a={begin:function(c){e.display("block")},translateX:[100,0],opacity:[0,1]},r="block";break;case"slideRightOut":a={translateX:[0,100],opacity:[1,0]};break;default:a=t,r=t.display}anime(Object.assign({targets:e,duration:200,easing:"linear"},a)).finished.then(function(){e.display(r),i&&i()})},store={get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t),t},del:function(e){localStorage.removeItem(e)}},$=function(e,t){return t=t||document,e.indexOf("#")===0?t.getElementById(e.replace("#","")):t.querySelector(e)};$.all=function(e,t){return t=t||document,t.querySelectorAll(e)},$.each=function(e,t,i){return $.all(e,i).forEach(t)},Object.assign(HTMLElement.prototype,{createChild:function(e,t,i){var a=document.createElement(e);switch(Object.assign(a,t),i){case"after":this.insertAfter(a);break;case"replace":this.innerHTML="";default:this.appendChild(a)}return a},wrap:function(e){var t=document.createElement("div");Object.assign(t,e),this.parentNode.insertBefore(t,this),this.parentNode.removeChild(this),t.appendChild(this)},height:function(e){return e&&(this.style.height=typeof e=="number"?e+"rem":e),this.getBoundingClientRect().height},width:function(e){return e&&(this.style.width=typeof e=="number"?e+"rem":e),this.getBoundingClientRect().width},top:function(){return this.getBoundingClientRect().top},left:function(){return this.getBoundingClientRect().left},attr:function(e,t){return t===null?this.removeAttribute(e):t?(this.setAttribute(e,t),this):this.getAttribute(e)},insertAfter:function(e){var t=this.parentNode;t.lastChild==this?t.appendChild(e):t.insertBefore(e,this.nextSibling)},display:function(e){return e==null?this.style.display:(this.style.display=e,this)},child:function(e){return $(e,this)},find:function(e){return $.all(e,this)},_class:function(e,t,i){var a=t.indexOf(" ")?t.split(" "):[t],r=this;a.forEach(function(c){e=="toggle"?r.classList.toggle(c,i):r.classList[e](c)})},addClass:function(e){return this._class("add",e),this},removeClass:function(e){return this._class("remove",e),this},toggleClass:function(e,t){return this._class("toggle",e,t),this},hasClass:function(e){return this.classList.contains(e)}});var NOWPLAYING=null;const isMobile=/mobile/i.test(window.navigator.userAgent),mediaPlayer=function(e,t){var i={type:"audio",mode:"random",btns:["play-pause","music"],controls:["mode","backward","play-pause","forward","volume"],events:{"play-pause":function(n){r.paused?e.player.play():e.player.pause()},music:function(n){c.el.hasClass("show")?c.hide():(c.el.addClass("show"),l.scroll().title())}}},a={random:function(n){return Math.floor(Math.random()*n)},parse:function(n){var s=[];return[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+).html","tencent","song"],["y.qq.com.*album/(\\w+).html","tencent","album"],["y.qq.com.*singer/(\\w+).html","tencent","artist"],["y.qq.com.*playsquare/(\\w+).html","tencent","playlist"],["y.qq.com.*playlist/(\\w+).html","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]].forEach(function(o){var d=new RegExp(o[0]),h=d.exec(n);h!==null&&(s=[o[1],o[2],h[1]])}),s},fetch:function(n){var s=[];return new Promise(function(o,d){n.forEach(function(h){var f=a.parse(h);if(f[0]){var b=JSON.stringify(f),w=store.get(b);w?(s.push.apply(s,JSON.parse(w)),o(s)):fetch("https://api.i-meto.com/meting/api?server="+f[0]+"&type="+f[1]+"&id="+f[2]+"&r="+Math.random()).then(function(C){return C.json()}).then(function(C){store.set(b,JSON.stringify(C)),s.push.apply(s,C),o(s)}).catch(function(C){})}else s.push(h),o(s)})})},secondToTime:function(n){var s=function(f){return isNaN(f)?"00":f<10?"0"+f:""+f},o=Math.floor(n/3600),d=Math.floor((n-3600*o)/60),h=Math.floor(n-3600*o-60*d);return(o>0?[o,d,h]:[d,h]).map(s).join(":")},nameMap:{dragStart:isMobile?"touchstart":"mousedown",dragMove:isMobile?"touchmove":"mousemove",dragEnd:isMobile?"touchend":"mouseup"}},r=null;e.player={_id:a.random(999999),group:!0,load:function(n){var s="";n&&n.length>0?this.options.rawList!==n&&(this.options.rawList=n,l.clear()):(s="none",this.pause());for(var o in y.el)y.el[o].display(s);return this},fetch:function(){var n=this;return new Promise(function(s,o){if(l.data.length>0)s();else if(n.options.rawList){var d=[];n.options.rawList.forEach(function(h,f){d.push(new Promise(function(b,w){var C,L=f;h.list?(n.group=!0,C=h.list):(L=0,n.group=!1,C=[h]),a.fetch(C).then(function(k){l.add(L,k),b()})}))}),Promise.all(d).then(function(){s(!0)})}}).then(function(s){s&&(l.create(),p.create(),n.mode())})},mode:function(){var n=l.data.length;if(n&&l.errnum!=n){var s=p.step=="next"?1:-1,o=function(){var h=l.index+s;(h>n||h<0)&&(h=p.step=="next"?0:n-1),l.index=h},d=function(){var h=a.random(n);l.index!==h?l.index=h:o()};switch(this.options.mode){case"random":d();break;case"order":o();break;case"loop":p.step&&o(),l.index==-1&&d()}this.init()}},switch:function(n){typeof n=="number"&&n!=l.index&&l.current()&&!l.current().error&&(l.index=n,this.init())},init:function(){var n=l.current();if(!n||n.error)return void this.mode();var s=!1;r.paused||(s=!0,this.stop()),r.attr("src",n.url),r.attr("title",n.name+" - "+n.artist),this.volume(store.get("_PlayerVolume")||"0.7"),this.muted(store.get("_PlayerMuted")),u.create(),this.options.type=="audio"&&m.create(),s==1&&this.play()},play:function(){if(NOWPLAYING&&NOWPLAYING.player.pause(),l.current().error)return void this.mode();r.play().then(function(){l.scroll()}).catch(function(n){})},pause:function(){r.pause(),document.title=originTitle},stop:function(){r.pause(),r.currentTime=0,document.title=originTitle},seek:function(n){n=Math.max(n,0),n=Math.min(n,r.duration),r.currentTime=n,u.update(n/r.duration)},muted:function(n){n=="muted"?(r.muted=n,store.set("_PlayerMuted",n),p.update(0)):(store.del("_PlayerMuted"),r.muted=!1,p.update(r.volume))},volume:function(n){isNaN(n)||(p.update(n),store.set("_PlayerVolume",n),r.volume=n)},mini:function(){c.hide()}};var c={el:null,create:function(){this.el||(this.el=e.createChild("div",{className:"player-info",innerHTML:(e.player.options.type=="audio"?'<div class="preview"></div>':"")+'<div class="controller"></div><div class="playlist"></div>'},"after"),m.el=this.el.child(".preview"),l.el=this.el.child(".playlist"),p.el=this.el.child(".controller"))},hide:function(){var n=this.el;n.addClass("hide"),window.setTimeout(function(){n.removeClass("show hide")},300)}},l={el:null,data:[],index:-1,errnum:0,add:function(n,s){var o=this;s.forEach(function(d,h){d.group=n,d.name=d.name||d.title||"Meida name",d.artist=d.artist||d.author||"Anonymous",d.cover=d.cover||d.pic,d.type=d.type||"normal",o.data.push(d)})},clear:function(){this.data=[],this.el.innerHTML="",this.index!==-1&&(this.index=-1,e.player.fetch())},create:function(){var n=this.el;this.data.map(function(s,o){if(!s.el){var d="list-"+e.player._id+"-"+s.group,h=$("#"+d);return h||(h=n.createChild("div",{id:d,className:e.player.group?"tab":"",innerHTML:"<ol></ol>"}),e.player.group&&h.attr("data-title",e.player.options.rawList[s.group].title).attr("data-id",e.player._id)),s.el=h.child("ol").createChild("li",{title:s.name+" - "+s.artist,innerHTML:'<span class="info"><span>'+s.name+"</span><span>"+s.artist+"</span></span>",onclick:function(f){var b=f.currentTarget;return l.index===o&&u.el?void(r.paused?e.player.play():e.player.seek(r.duration*u.percent(f,b))):(e.player.switch(o),void e.player.play())}}),s}}),tabFormat()},current:function(){return this.data[this.index]},scroll:function(){var n=this.current(),s=this.el.child("li.active");s&&s.removeClass("active");var o=this.el.child(".tab.active");return o&&o.removeClass("active"),s=this.el.find(".nav li")[n.group],s&&s.addClass("active"),o=this.el.find(".tab")[n.group],o&&o.addClass("active"),pageScroll(n.el,n.el.offsetTop),this},title:function(){if(!r.paused){var n=this.current();document.title="Now Playing..."+n.name+" - "+n.artist+" | "+originTitle}},error:function(){var n=this.current();n.el.removeClass("current").addClass("error"),n.error=!0,this.errnum++}},v={el:null,data:null,index:0,create:function(n){var s=l.index,o=this,d=l.current().lrc,h=function(f){if(s===l.index){o.data=o.parse(f);var b="";o.data.forEach(function(w,C){b+="<p"+(C===0?' class="current"':"")+">"+w[1]+"</p>"}),o.el=n.createChild("div",{className:"inner",innerHTML:b},"replace"),o.index=0}};d.startsWith("http")?this.fetch(d,h):h(d)},update:function(n){if(this.data&&(this.index>this.data.length-1||n<this.data[this.index][0]||!this.data[this.index+1]||n>=this.data[this.index+1][0])){for(var s=0;s<this.data.length;s++)if(n>=this.data[s][0]&&(!this.data[s+1]||n<this.data[s+1][0])){this.index=s;var o=-(this.index-1);this.el.style.transform="translateY("+o+"rem)",this.el.style.webkitTransform="translateY("+o+"rem)",this.el.getElementsByClassName("current")[0].removeClass("current"),this.el.getElementsByTagName("p")[s].addClass("current")}}},parse:function(n){if(n){n=n.replace(/([^\]^\n])\[/g,function(b,w){return w+`
[`});const h=n.split(`
`);var s=[];const f=h.length;for(var o=0;o<f;o++){const b=h[o].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),w=h[o].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(b){const C=b.length;for(var d=0;d<C;d++){const L=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(b[d]),k=60*L[1],T=parseInt(L[2]),E=L[4]?parseInt(L[4])/((L[4]+"").length===2?100:1e3):0,N=k+T+E;s.push([N,w])}}}return s=s.filter(function(b){return b[1]}),s.sort(function(b,w){return b[0]-w[0]}),s}return[]},fetch:function(n,s){fetch(n).then(function(o){return o.text()}).then(function(o){s(o)}).catch(function(o){})}},m={el:null,create:function(){var n=l.current();this.el.innerHTML='<div class="cover"><div class="disc"><img src="'+n.cover+'" class="blur" /></div></div><div class="info"><h4 class="title">'+n.name+"</h4><span>"+n.artist+'</span><div class="lrc"></div></div>',this.el.child(".cover").addEventListener("click",e.player.options.events["play-pause"]),v.create(this.el.child(".lrc"))}},u={el:null,bar:null,create:function(){var n=l.current().el;n&&(this.el&&(this.el.parentNode.removeClass("current").removeEventListener(a.nameMap.dragStart,this.drag),this.el.remove()),this.el=n.createChild("div",{className:"progress"}),this.el.attr("data-dtime",a.secondToTime(0)),this.bar=this.el.createChild("div",{className:"bar"}),n.addClass("current"),n.addEventListener(a.nameMap.dragStart,this.drag),l.scroll())},update:function(n){this.bar.width(Math.floor(100*n)+"%"),this.el.attr("data-ptime",a.secondToTime(n*r.duration))},seeking:function(n){n?this.el.addClass("seeking"):this.el.removeClass("seeking")},percent:function(n,s){var o=((n.clientX||n.changedTouches[0].clientX)-s.left())/s.width();return o=Math.max(o,0),Math.min(o,1)},drag:function(n){n.preventDefault();var s=l.current().el,o=function(h){h.preventDefault();var f=u.percent(h,s);u.update(f),v.update(f*r.duration)},d=function(h){h.preventDefault(),s.removeEventListener(a.nameMap.dragEnd,d),s.removeEventListener(a.nameMap.dragMove,o);var f=u.percent(h,s);u.update(f),e.player.seek(f*r.duration),r.disableTimeupdate=!1,u.seeking(!1)};r.disableTimeupdate=!0,u.seeking(!0),s.addEventListener(a.nameMap.dragMove,o),s.addEventListener(a.nameMap.dragEnd,d)}},p={el:null,btns:{},step:"next",create:function(){if(e.player.options.controls){var n=this;e.player.options.controls.forEach(function(s){if(!n.btns[s]){var o={onclick:function(d){n.events[s]?n.events[s](d):e.player.options.events[s](d)}};switch(s){case"volume":o.className=" "+(r.muted?"off":"on"),o.innerHTML='<div class="bar"></div>',o["on"+a.nameMap.dragStart]=n.events.volume,o.onclick=null;break;case"mode":o.className=" "+e.player.options.mode;break;default:o.className=""}o.className=s+o.className+" btn",n.btns[s]=n.el.createChild("div",o)}}),n.btns.volume.bar=n.btns.volume.child(".bar")}},events:{mode:function(n){switch(e.player.options.mode){case"loop":e.player.options.mode="random";break;case"random":e.player.options.mode="order";break;default:e.player.options.mode="loop"}p.btns.mode.className="mode "+e.player.options.mode+" btn",store.set("_PlayerMode",e.player.options.mode)},volume:function(n){n.preventDefault();var s=n.currentTarget,o=!1,d=function(f){f.preventDefault(),e.player.volume(p.percent(f,s)),o=!0},h=function(f){f.preventDefault(),s.removeEventListener(a.nameMap.dragEnd,h),s.removeEventListener(a.nameMap.dragMove,d),o?(e.player.muted(),e.player.volume(p.percent(f,s))):r.muted?(e.player.muted(),e.player.volume(r.volume)):(e.player.muted("muted"),p.update(0))};s.addEventListener(a.nameMap.dragMove,d),s.addEventListener(a.nameMap.dragEnd,h)},backward:function(n){p.step="prev",e.player.mode()},forward:function(n){p.step="next",e.player.mode()}},update:function(n){p.btns.volume.className="volume "+(!r.muted&&n>0?"on":"off")+" btn",p.btns.volume.bar.width(Math.floor(100*n)+"%")},percent:function(n,s){var o=((n.clientX||n.changedTouches[0].clientX)-s.left())/s.width();return o=Math.max(o,0),Math.min(o,1)}},g={onerror:function(){l.error(),e.player.mode()},ondurationchange:function(){r.duration!==1&&u.el.attr("data-dtime",a.secondToTime(r.duration))},onloadedmetadata:function(){e.player.seek(0),u.el.attr("data-dtime",a.secondToTime(r.duration))},onplay:function(){e.parentNode.addClass("playing"),showtip(this.attr("title")),NOWPLAYING=e},onpause:function(){e.parentNode.removeClass("playing"),NOWPLAYING=null},ontimeupdate:function(){this.disableTimeupdate||(u.update(this.currentTime/this.duration),v.update(this.currentTime))},onended:function(n){e.player.mode(),e.player.play()}},y={el:{},create:function(){if(e.player.options.btns){var n=this;e.player.options.btns.forEach(function(s){n.el[s]||(n.el[s]=e.createChild("div",{className:s+" btn",onclick:function(o){e.player.fetch().then(function(){e.player.options.events[s](o)})}}))})}}},x=function(n){e.player.created||(e.player.options=Object.assign(i,n),e.player.options.mode=store.get("_PlayerMode")||e.player.options.mode,y.create(),r=e.createChild(e.player.options.type,g),c.create(),e.parentNode.addClass(e.player.options.type),e.player.created=!0)};return x(t),e};var statics=CONFIG.statics.indexOf("//")>0?CONFIG.statics:CONFIG.root,scrollAction={x:"undefined",y:"undefined"},diffY=0,originTitle,titleTime;const BODY=document.getElementsByTagName("body")[0],HTML=document.documentElement,Container=$("#container"),loadCat=$("#loading"),siteNav=$("#nav"),siteHeader=$("#header"),menuToggle=siteNav.child(".toggle"),quickBtn=$("#quick"),sideBar=$("#sidebar"),siteBrand=$("#brand");var toolBtn=$("#tool"),toolPlayer,backToTop,goToComment,showContents,siteSearch=$("#search"),siteNavHeight,headerHightInner,headerHight,oWinHeight=window.innerHeight,oWinWidth=window.innerWidth,LOCAL_HASH=0,LOCAL_URL=window.location.href,pjax;const lazyload=lozad("img, [data-background-image]",{loaded:function(e){e.addClass("lozaded")}}),Loader={timer:null,lock:!1,show:function(){clearTimeout(this.timer),document.body.removeClass("loaded"),loadCat.attr("style","display:block"),Loader.lock=!1},hide:function(e){CONFIG.loader.start||(e=-1),this.timer=setTimeout(this.vanish,e||3e3)},vanish:function(){Loader.lock||(CONFIG.loader.start&&transition(loadCat,0),document.body.addClass("loaded"),Loader.lock=!0)}},changeTheme=function(e){var t=$(".theme .ic");e=="dark"?(HTML.attr("data-theme",e),t.removeClass("i-sun"),t.addClass("i-moon")):(HTML.attr("data-theme",null),t.removeClass("i-moon"),t.addClass("i-sun"))},changeMetaTheme=function(e){HTML.attr("data-theme")=="dark"&&(e="#222"),$('meta[name="theme-color"]').attr("content",e)},themeColorListener=function(){window.matchMedia("(prefers-color-scheme: dark)").addListener(function(t){t.matches?changeTheme("dark"):changeTheme()});var e=store.get("theme");e?changeTheme(e):CONFIG.darkmode&&changeTheme("dark"),$(".theme").addEventListener("click",function(t){var i=t.currentTarget.child(".ic"),a=BODY.createChild("div",{id:"neko",innerHTML:'<div class="planet"><div class="sun"></div><div class="moon"></div></div><div class="body"><div class="face"><section class="eyes left"><span class="pupil"></span></section><section class="eyes right"><span class="pupil"></span></section><span class="nose"></span></div></div>'}),r=function(){transition(a,{delay:2500,opacity:0},function(){BODY.removeChild(a)})};if(i.hasClass("i-sun"))var c=function(){a.addClass("dark"),changeTheme("dark"),store.set("theme","dark"),r()};else{a.addClass("dark");var c=function(){a.removeClass("dark"),changeTheme(),store.set("theme","light"),r()}}transition(a,1,function(){setTimeout(c,210)})})},visibilityListener=function(){document.addEventListener("visibilitychange",function(){switch(document.visibilityState){case"hidden":$('[rel="icon"]').attr("href",statics+CONFIG.favicon.hidden),document.title=LOCAL.favicon.hide,CONFIG.loader.switch&&Loader.show(),clearTimeout(titleTime);break;case"visible":$('[rel="icon"]').attr("href",statics+CONFIG.favicon.normal),document.title=LOCAL.favicon.show,CONFIG.loader.switch&&Loader.hide(1e3),titleTime=setTimeout(function(){document.title=originTitle},2e3)}})},showtip=function(e){if(e){var t=BODY.createChild("div",{innerHTML:e,className:"tip"});setTimeout(function(){t.addClass("hide"),setTimeout(function(){BODY.removeChild(t)},300)},3e3)}},resizeHandle=function(e){siteNavHeight=siteNav.height(),headerHightInner=siteHeader.height(),headerHight=headerHightInner+$("#waves").height(),oWinWidth!=window.innerWidth&&sideBarToggleHandle(null,1),oWinHeight=window.innerHeight,oWinWidth=window.innerWidth,sideBar.child(".panels").height(oWinHeight+"px")},scrollHandle=function(e){var t=window.innerHeight,i=getDocHeight(),a=i>t?i-t:document.body.scrollHeight-t,r=window.pageYOffset>headerHightInner,c=window.pageYOffset>0;changeMetaTheme(r?"#FFF":"#222"),siteNav.toggleClass("show",r),toolBtn.toggleClass("affix",c),siteBrand.toggleClass("affix",c),sideBar.toggleClass("affix",window.pageYOffset>headerHight&&document.body.offsetWidth>991),typeof scrollAction.y>"u"&&(scrollAction.y=window.pageYOffset),diffY=scrollAction.y-window.pageYOffset,diffY<0?(siteNav.removeClass("up"),siteNav.toggleClass("down",r)):diffY>0&&(siteNav.removeClass("down"),siteNav.toggleClass("up",r)),scrollAction.y=window.pageYOffset;var l=Math.round(Math.min(100*window.pageYOffset/a,100))+"%";backToTop.child("span").innerText=l,$(".percent").width(l)},pagePosition=function(){CONFIG.auto_scroll&&store.set(LOCAL_URL,scrollAction.y)},positionInit=function(e){var t=window.location.hash,i=null;return LOCAL_HASH?void store.del(LOCAL_URL):(i=t?$(decodeURI(t)):CONFIG.auto_scroll?parseInt(store.get(LOCAL_URL)):0,i&&(pageScroll(i),LOCAL_HASH=1),void(e&&t&&!LOCAL_HASH&&(pageScroll(i),LOCAL_HASH=1)))},clipBoard=function(e,t){var i=BODY.createChild("textarea",{style:{top:window.scrollY+"px",position:"absolute",opacity:"0"},readOnly:!0,value:e});const a=document.getSelection(),r=a.rangeCount>0&&a.getRangeAt(0);i.select(),i.setSelectionRange(0,e.length),i.readOnly=!1;var c=document.execCommand("copy");t&&t(c),i.blur(),r&&(a.removeAllRanges(),a.addRange(r)),BODY.removeChild(i)},sideBarToggleHandle=function(e,t){sideBar.hasClass("on")?(sideBar.removeClass("on"),menuToggle.removeClass("close"),t?sideBar.style="":transition(sideBar,"slideRightOut")):t?sideBar.style="":transition(sideBar,"slideRightIn",function(){sideBar.addClass("on"),menuToggle.addClass("close")})},sideBarTab=function(){var e=sideBar.child(".inner");sideBar.find(".panel"),sideBar.child(".tab")&&e.removeChild(sideBar.child(".tab"));var t=document.createElement("ul"),i="active";t.className="tab",["contents","related","overview"].forEach(function(a){var r=sideBar.child(".panel."+a);if(r.innerHTML.replace(/(^\s*)|(\s*$)/g,"").length<1)return void(a=="contents"&&showContents.display("none"));a=="contents"&&showContents.display("");var c=document.createElement("li"),l=document.createElement("span"),v=document.createTextNode(r.attr("data-title"));l.appendChild(v),c.appendChild(l),c.addClass(a+" item"),i?(r.addClass(i),c.addClass(i)):r.removeClass("active"),c.addEventListener("click",function(m){var u=event.currentTarget;u.hasClass("active")||(sideBar.find(".tab .item").forEach(function(p){p.removeClass("active")}),sideBar.find(".panel").forEach(function(p){p.removeClass("active")}),sideBar.child(".panel."+u.className.replace(" item","")).addClass("active"),u.addClass("active"))}),t.appendChild(c),i=""}),t.childNodes.length>1?(e.insertBefore(t,e.childNodes[0]),sideBar.child(".panels").style.paddingTop=""):sideBar.child(".panels").style.paddingTop=".625rem"},sidebarTOC=function(){var e=$.all(".contents li");if(!(e.length<1)){var t=Array.prototype.slice.call(e)||[],i=null;t=t.map(function(v,m){var u=v.child("a.toc-link"),p=$(decodeURI(u.attr("href")));if(p){var g=p.child("a.anchor"),y=function(x){x.preventDefault();var n=$(decodeURI(x.currentTarget.attr("href")));i=m,pageScroll(n,null,function(){r(m),i=null})};return u.addEventListener("click",y),g&&g.addEventListener("click",function(x){y(x),clipBoard(CONFIG.hostname+"/"+LOCAL.path+x.currentTarget.attr("href"))}),p}});var a=sideBar.child(".contents.panel"),r=function(v,m){var u=e[v];if(u&&!u.hasClass("current")){$.each(".toc .active",function(y){y&&y.removeClass("active current")}),t.forEach(function(y){y&&y.removeClass("active")}),u.addClass("active current"),t[v]&&t[v].addClass("active");for(var p=u.parentNode;!p.matches(".contents");){if(p.matches("li")){p.addClass("active");var g=$(p.child("a.toc-link").attr("href"));g&&g.addClass("active")}p=p.parentNode}getComputedStyle(sideBar).display!="none"&&a.hasClass("active")&&pageScroll(a,u.offsetTop-a.offsetHeight/4)}},c=function(v){var m=0,u=v[m];if(u.boundingClientRect.top>0)return m=t.indexOf(u.target),m===0?0:m-1;for(;m<v.length;m++){if(!(v[m].boundingClientRect.top<=0))return t.indexOf(u.target);u=v[m]}return t.indexOf(u.target)},l=function(){if(window.IntersectionObserver){var v=new IntersectionObserver(function(m,u){var p=c(m)+(diffY<0?1:0);i===null&&r(p)},{rootMargin:"0px 0px -100% 0px",threshold:0});t.forEach(function(m){m&&v.observe(m)})}};l()}},backToTopHandle=function(){pageScroll(0)},goToBottomHandle=function(){pageScroll(parseInt(Container.height()))},goToCommentHandle=function(){pageScroll($("#comments"))},menuActive=function(){$.each(".menu .item:not(.title)",function(e){var t=e.child("a[href]"),i=e.parentNode.parentNode;if(t){var a=t.pathname===location.pathname||t.pathname===location.pathname.replace("index.html",""),r=!CONFIG.root.startsWith(t.pathname)&&location.pathname.startsWith(t.pathname),c=t.hostname===location.hostname&&(a||r);e.toggleClass("active",c),e.parentNode.child(".active")&&i.hasClass("dropdown")?i.removeClass("active").addClass("expand"):i.removeClass("expand")}})},cardActive=function(){if($(".index.wrap")){if(window.IntersectionObserver){var e=new IntersectionObserver(function(t){t.forEach(function(i){i.target.hasClass("show")?e.unobserve(i.target):(i.isIntersecting||i.intersectionRatio>0)&&(i.target.addClass("show"),e.unobserve(i.target))})},{root:null,threshold:[.3]});$.each(".index.wrap article.item, .index.wrap section.item",function(t){e.observe(t)}),$(".index.wrap .item:first-child").addClass("show")}else $.each(".index.wrap article.item, .index.wrap section.item",function(t){t.hasClass("show")===!1&&t.addClass("show")});$.each(".cards .item",function(t,i){["mouseenter","touchstart"].forEach(function(a){t.addEventListener(a,function(r){$(".cards .item.active")&&$(".cards .item.active").removeClass("active"),t.addClass("active")})}),["mouseleave"].forEach(function(a){t.addEventListener(a,function(r){t.removeClass("active")})})})}},registerExtURL=function(){$.each("span.exturl",function(e){var t=document.createElement("a");t.href=decodeURIComponent(atob(e.dataset.url).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")),t.rel="noopener external nofollow noreferrer",t.target="_blank",t.className=e.className,t.title=e.title||e.innerText,t.innerHTML=e.innerHTML,e.dataset.backgroundImage&&(t.dataset.backgroundImage=e.dataset.backgroundImage),e.parentNode.replaceChild(t,e)})},postFancybox=function(e){$(e+" .md img")&&(vendorCss("fancybox"),vendorJs("fancybox",function(){var t=jQuery.noConflict();$.each(e+" p.gallery",function(i){var a=document.createElement("div");a.className="gallery",a.attr("data-height",i.attr("data-height")||220),a.innerHTML=i.innerHTML.replace(/<br>/g,""),i.parentNode.insertBefore(a,i),i.remove()}),$.each(e+" .md img:not(.emoji):not(.vemoji)",function(i){var a,r=t(i),c="image-info";if(!r.is("a img")){var l=r.attr("data-src")||r.attr("src");r.data("safe-src",l);var v=r.wrap('<a class="fancybox" href="'+l+'" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"></a>').parent("a");r.is(".gallery img")?c="jg-caption":v.attr("data-fancybox","default").attr("rel","default")}if(a=i.attr("title")){v.attr("data-caption",a);var m=document.createElement("span"),u=document.createTextNode(a);m.appendChild(u),m.addClass(c),i.insertAfter(m)}}),$.each(e+" div.gallery",function(i,a){t(i).justifiedGallery({rowHeight:t(i).data("height")||120,rel:"gallery-"+a}).on("jg.complete",function(){t(this).find("a").each(function(r,c){c.attr("data-fancybox","gallery-"+a)})})}),t.fancybox.defaults.hash=!1,t(e+" .fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})},window.jQuery))},postBeauty=function(){loadComments(),$(".md")&&(postFancybox(".post.block"),$(".post.block").oncopy=function(e){if(showtip(LOCAL.copyright),LOCAL.nocopy)return void e.preventDefault();var t=$("#copyright");if(window.getSelection().toString().length>30&&t){e.preventDefault();var i="# "+t.child(".author").innerText,a="# "+t.child(".link").innerText,r="# "+t.child(".license").innerText,c=i+"<br>"+a+"<br>"+r+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),l=i+`
`+a+`
`+r+`

`+window.getSelection().toString().replace(/\r\n/g,`
`);if(e.clipboardData)e.clipboardData.setData("text/html",c),e.clipboardData.setData("text/plain",l);else if(window.clipboardData)return window.clipboardData.setData("text",l)}},$.each("li ruby",function(e){var t=e.parentNode;e.parentNode.tagName!="LI"&&(t=e.parentNode.parentNode),t.addClass("ruby")}),$.each("ol[start]",function(e){e.style.counterReset="counter "+parseInt(e.attr("start")-1)}),$.each(".md table",function(e){e.wrap({className:"table-container"})}),$.each(".highlight > .table-container",function(e){e.className="code-container"}),$.each("figure.highlight",function(e){var t=e.child(".code-container"),i=e.child("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');var a=e.child(".copy-btn");LOCAL.nocopy?a.remove():(a.addEventListener("click",function(g){var y=g.currentTarget,x="",n="";t.find("pre").forEach(function(s){n+=x+s.innerText,x=`
`}),clipBoard(n,function(s){y.child(".ic").className=s?"ic i-check":"ic i-times",y.blur(),showtip(LOCAL.copyright)})}),a.addEventListener("mouseleave",function(g){setTimeout(function(){g.target.child(".ic").className="ic i-clipboard"},1e3)}));var r=e.child(".breakline-btn");r.addEventListener("click",function(g){var y=g.currentTarget;e.hasClass("breakline")?(e.removeClass("breakline"),y.child(".ic").className="ic i-align-left"):(e.addClass("breakline"),y.child(".ic").className="ic i-align-justify")});var c=e.child(".fullscreen-btn"),l=function(){e.removeClass("fullscreen"),e.scrollTop=0,BODY.removeClass("fullscreen"),c.child(".ic").className="ic i-expand"},v=function(g){g.currentTarget,e.hasClass("fullscreen")?(l(),p&&p(),pageScroll(e)):(e.addClass("fullscreen"),BODY.addClass("fullscreen"),c.child(".ic").className="ic i-compress",u&&u())};if(c.addEventListener("click",v),i&&i.addEventListener("click",v),t&&t.find("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');var m=t.child(".show-btn"),u=function(){t.style.maxHeight="",m.addClass("open")},p=function(){t.style.maxHeight="300px",m.removeClass("open")};m.addEventListener("click",function(g){m.hasClass("open")?(l(),p(),pageScroll(t)):u()})}}),$.each("pre.mermaid > svg",function(e){e.style.maxWidth=""}),$.each(".reward button",function(e){e.addEventListener("click",function(t){t.preventDefault();var i=$("#qr");i.display()==="inline-flex"?transition(i,0):transition(i,1,function(){i.display("inline-flex")})})}),$.each(".quiz > ul.options li",function(e){e.addEventListener("click",function(t){e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")})}),$.each(".quiz > p",function(e){e.addEventListener("click",function(t){e.parentNode.toggleClass("show")})}),$.each(".quiz > p:first-child",function(e){var t=e.parentNode,i="choice";(t.hasClass("true")||t.hasClass("false"))&&(i="true_false"),t.hasClass("multi")&&(i="multiple"),t.hasClass("fill")&&(i="gap_fill"),t.hasClass("essay")&&(i="essay"),e.attr("data-type",LOCAL.quiz[i])}),$.each(".quiz .mistake",function(e){e.attr("data-type",LOCAL.quiz.mistake)}),$.each("div.tags a",function(e){e.className=["primary","success","info","warning","danger"][Math.floor(5*Math.random())]}),$.each(".md div.player",function(e){mediaPlayer(e,{type:e.attr("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.attr("data-src"))).fetch()}))},tabFormat=function(){var e;$.each("div.tab",function(t,i){if(!t.attr("data-ready")){var a=t.attr("data-id"),r=t.attr("data-title"),c=$("#"+a);if(c)e=!1;else{c=document.createElement("div"),c.className="tabs",c.id=a,c.innerHTML='<div class="show-btn"></div>';var l=c.child(".show-btn");l.addEventListener("click",function(u){pageScroll(c)}),t.parentNode.insertBefore(c,t),e=!0}var v=c.child(".nav ul");v||(v=c.createChild("div",{className:"nav",innerHTML:"<ul></ul>"}).child("ul"));var m=v.createChild("li",{innerHTML:r});e&&(m.addClass("active"),t.addClass("active")),m.addEventListener("click",function(u){var p=u.currentTarget;c.find(".active").forEach(function(g){g.removeClass("active")}),t.addClass("active"),p.addClass("active")}),c.appendChild(t),t.attr("data-ready",!0)}})},loadComments=function(){var e=$("#comments");if(!e)return void goToComment.display("none");if(goToComment.display(""),window.IntersectionObserver){var t=new IntersectionObserver(function(i,a){var r=i[0];vendorCss("valine"),(r.isIntersecting||r.intersectionRatio>0)&&(transition($("#comments"),"bounceUpIn"),a.disconnect())});t.observe(e)}else vendorCss("valine")},algoliaSearch=function(e){if(CONFIG.search!==null){siteSearch||(siteSearch=BODY.createChild("div",{id:"search",innerHTML:'<div class="inner"><div class="header"><span class="icon"><i class="ic i-search"></i></span><div class="search-input-container"></div><span class="close-btn"><i class="ic i-times-circle"></i></span></div><div class="results"><div class="inner"><div id="search-stats"></div><div id="search-hits"></div><div id="search-pagination"></div></div></div></div>'}));var t=instantsearch({indexName:CONFIG.search.indexName,searchClient:algoliasearch(CONFIG.search.appID,CONFIG.search.apiKey),searchFunction:function(a){var r=$(".search-input");r.value&&a.search()}});t.on("render",function(){e.refresh($("#search-hits"))}),t.addWidgets([instantsearch.widgets.configure({hitsPerPage:CONFIG.search.hits.per_page||10}),instantsearch.widgets.searchBox({container:".search-input-container",placeholder:LOCAL.search.placeholder,showReset:!1,showSubmit:!1,showLoadingIndicator:!1,cssClasses:{input:"search-input"}}),instantsearch.widgets.stats({container:"#search-stats",templates:{text:function(a){var r=LOCAL.search.stats.replace(/\$\{hits}/,a.nbHits).replace(/\$\{time}/,a.processingTimeMS);return r+'<span class="algolia-powered"></span><hr>'}}}),instantsearch.widgets.hits({container:"#search-hits",templates:{item:function(a){var r=a.categories?"<span>"+a.categories.join('<i class="ic i-angle-right"></i>')+"</span>":"";return'<a href="'+CONFIG.root+a.path+'">'+r+a._highlightResult.title.value+"</a>"},empty:function(a){return'<div id="hits-empty">'+LOCAL.search.empty.replace(/\$\{query}/,a.query)+"</div>"}},cssClasses:{item:"item"}}),instantsearch.widgets.pagination({container:"#search-pagination",scrollTo:!1,showFirst:!1,showLast:!1,templates:{first:'<i class="ic i-angle-double-left"></i>',last:'<i class="ic i-angle-double-right"></i>',previous:'<i class="ic i-angle-left"></i>',next:'<i class="ic i-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",selectedItem:"current",disabledItem:"disabled-item"}})]),t.start(),$.each(".search",function(a){a.addEventListener("click",function(){document.body.style.overflow="hidden",transition(siteSearch,"shrinkIn",function(){$(".search-input").focus()})})});const i=function(){document.body.style.overflow="",transition(siteSearch,0)};siteSearch.addEventListener("click",function(a){a.target===siteSearch&&i()}),$(".close-btn").addEventListener("click",i),window.addEventListener("pjax:success",i),window.addEventListener("keyup",function(a){a.key==="Escape"&&i()})}},domInit=function(){$.each(".overview .menu > .item",function(e){siteNav.child(".menu").appendChild(e.cloneNode(!0))}),loadCat.addEventListener("click",Loader.vanish),menuToggle.addEventListener("click",sideBarToggleHandle),$(".dimmer").addEventListener("click",sideBarToggleHandle),quickBtn.child(".down").addEventListener("click",goToBottomHandle),quickBtn.child(".up").addEventListener("click",backToTopHandle),toolBtn||(toolBtn=siteHeader.createChild("div",{id:"tool",innerHTML:'<div class="item player"></div><div class="item contents"><i class="ic i-list-ol"></i></div><div class="item chat"><i class="ic i-comments"></i></div><div class="item back-to-top"><i class="ic i-arrow-up"></i><span>0%</span></div>'})),toolPlayer=toolBtn.child(".player"),backToTop=toolBtn.child(".back-to-top"),goToComment=toolBtn.child(".chat"),showContents=toolBtn.child(".contents"),backToTop.addEventListener("click",backToTopHandle),goToComment.addEventListener("click",goToCommentHandle),showContents.addEventListener("click",sideBarToggleHandle),mediaPlayer(toolPlayer),$("main").addEventListener("click",function(){toolPlayer.player.mini()})},pjaxReload=function(){pagePosition(),sideBar.hasClass("on")&&transition(sideBar,function(){sideBar.removeClass("on"),menuToggle.removeClass("close")}),$("#main").innerHTML="",$("#main").appendChild(loadCat.lastChild.cloneNode(!0)),pageScroll(0)},siteRefresh=function(e){LOCAL_HASH=0,LOCAL_URL=window.location.href,vendorCss("katex"),vendorJs("copy_tex"),vendorCss("mermaid"),vendorJs("chart"),vendorJs("valine",function(){var t=Object.assign({},CONFIG.valine);t=Object.assign(t,LOCAL.valine||{}),t.el="#comments",t.pathname=LOCAL.path,t.pjax=pjax,t.lazyload=lazyload,new MiniValine(t),setTimeout(function(){positionInit(1),postFancybox(".v")},1e3)},window.MiniValine),e||$.each("script[data-pjax]",pjaxScript),originTitle=document.title,resizeHandle(),menuActive(),sideBarTab(),sidebarTOC(),registerExtURL(),postBeauty(),tabFormat(),toolPlayer.player.load(LOCAL.audio||CONFIG.audio||{}),Loader.hide(),setTimeout(function(){positionInit()},500),cardActive(),lazyload.observe()},siteInit=function(){domInit(),pjax=new Pjax({selectors:["head title",".languages",".pjax","script[data-config]"],analytics:!1,cacheBust:!1}),CONFIG.quicklink.ignores=LOCAL.ignores,quicklink.listen(CONFIG.quicklink),visibilityListener(),themeColorListener(),algoliaSearch(pjax),window.addEventListener("scroll",scrollHandle),window.addEventListener("resize",resizeHandle),window.addEventListener("pjax:send",pjaxReload),window.addEventListener("pjax:success",siteRefresh),window.addEventListener("beforeunload",function(){pagePosition()}),siteRefresh(1)};window.addEventListener("DOMContentLoaded",siteInit),console.log("%c Theme.Shoka v"+CONFIG.version+" %c https://shoka.lostyu.me/ ","color: white; background: #e9546b; padding:5px 0;","padding:4px;border:1px solid #e9546b;");
